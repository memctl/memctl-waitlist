---
import BaseLayout from '../layouts/BaseLayout.astro';
import WaitlistForm from '../components/WaitlistForm.astro';
import TerminalAnimation from '../components/TerminalAnimation.astro';
---

<BaseLayout title="Memctl | Open source memory infrastructure for AI coding agents">

  <!-- ══════════════════════════════════════════════
       HERO
       ══════════════════════════════════════════════ -->
  <section class="relative overflow-hidden">
    <!-- Blueprint hatching -->
    <div
      class="pointer-events-none absolute inset-0 bg-[repeating-linear-gradient(-45deg,transparent,transparent_6px,var(--border)_6px,var(--border)_7px)] opacity-[0.25] [mask-image:radial-gradient(ellipse_60%_55%_at_40%_45%,black_50%,transparent_100%)]"
      aria-hidden="true"
    ></div>

    <!-- Orange diagonal wash -->
    <div
      class="pointer-events-none absolute -left-[15%] top-[15%] h-full w-[70%] blur-[80px] -skew-x-[14deg]"
      style="background: linear-gradient(125deg, rgba(249,115,22,0.18) 0%, rgba(249,115,22,0.12) 40%, transparent 75%)"
      aria-hidden="true"
    ></div>

    <!-- Edge fade -->
    <div
      class="pointer-events-none absolute inset-0 z-[2]"
      style="background: radial-gradient(ellipse 80% 70% at 35% 45%, transparent 40%, var(--bg) 100%)"
      aria-hidden="true"
    ></div>

    <!-- Structural frame lines -->
    <div class="pointer-events-none absolute inset-0 z-[5]" aria-hidden="true">
      <div class="mx-auto flex h-full max-w-[1400px] justify-between px-6">
        <div class="w-px bg-gradient-to-b from-transparent via-[var(--border)] to-transparent opacity-[0.12]"></div>
        <div class="w-px bg-[var(--border)] opacity-[0.06]"></div>
        <div class="w-px bg-gradient-to-b from-transparent via-[var(--border)] to-transparent opacity-[0.12]"></div>
      </div>
    </div>

    <!-- Vertical accent line -->
    <div class="pointer-events-none absolute bottom-0 left-1/2 z-[12] h-24 w-px bg-gradient-to-b from-transparent via-[var(--border)] to-[var(--border)]" aria-hidden="true"></div>

    <!-- Bottom fade -->
    <div
      class="pointer-events-none absolute inset-x-0 bottom-0 z-[11] h-32"
      style="background: linear-gradient(to top, var(--bg), transparent)"
      aria-hidden="true"
    ></div>

    <!-- Content -->
    <div class="relative z-10 mx-auto max-w-[1400px] px-6 pt-20 pb-16 lg:pt-28 lg:pb-20">
      <div class="grid grid-cols-1 items-center gap-8 lg:grid-cols-[1.1fr_1fr] lg:gap-14">
        <!-- Left: Copy -->
        <div>
          <div class="animate-fade-in-up mb-4 font-mono text-[12px] text-[var(--tertiary)]">
            <span class="text-[#F97316]">//</span> shared memory for ai coding agents
          </div>

          <h1 class="animate-fade-in-up font-extrabold leading-[1.05] tracking-[-0.03em] [animation-delay:100ms]" style="font-size: clamp(2.5rem, 5.5vw, 4.5rem)">
            Open source memory
            <br />
            infrastructure for
            <br />
            <span class="text-[#F97316]">AI coding agents</span>
          </h1>

          <p class="animate-fade-in-up mt-5 max-w-[480px] text-[clamp(1rem,1.8vw,1.15rem)] leading-[1.65] text-[var(--secondary)] [animation-delay:200ms]">
            Give your team's AI agents shared, branch-aware memory. Connected to your repos, synced across every IDE and tool via MCP.
          </p>

          <div class="animate-fade-in-up mt-6 [animation-delay:300ms]">
            <WaitlistForm />
            <p class="text-xs text-[var(--tertiary)] mt-2.5">No spam. Unsubscribe anytime.</p>
          </div>
        </div>

        <!-- Right: Animated Terminal -->
        <div class="animate-fade-in-up [animation-delay:400ms]">
          <TerminalAnimation />
        </div>
      </div>
    </div>
  </section>

  <!-- ── Divider ── -->
  <div class="relative flex items-center" aria-hidden="true">
    <div class="absolute inset-x-0 h-px bg-gradient-to-r from-transparent via-[var(--border)] to-transparent"></div>
    <div class="relative mx-auto flex w-full max-w-[1400px] justify-between px-6">
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
    </div>
  </div>

  <!-- ══════════════════════════════════════════════
       FEATURES (Bento)
       ══════════════════════════════════════════════ -->
  <section class="relative overflow-hidden py-14 lg:py-20">
    <!-- Blueprint hatching -->
    <div
      class="pointer-events-none absolute inset-0 bg-[repeating-linear-gradient(-45deg,transparent,transparent_7px,var(--border)_7px,var(--border)_8px)] opacity-[0.2] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,black_40%,transparent_100%)]"
      aria-hidden="true"
    ></div>

    <!-- Structural frame lines -->
    <div class="pointer-events-none absolute inset-0" aria-hidden="true">
      <div class="mx-auto flex h-full max-w-[1400px] justify-between px-6">
        <div class="w-px bg-gradient-to-b from-transparent via-[var(--border)] to-transparent opacity-[0.12]"></div>
        <div class="w-px bg-[var(--border)] opacity-[0.06]"></div>
        <div class="w-px bg-[var(--border)] opacity-[0.06]"></div>
        <div class="w-px bg-gradient-to-b from-transparent via-[var(--border)] to-transparent opacity-[0.12]"></div>
      </div>
    </div>

    <div class="relative z-10 max-w-[1400px] mx-auto px-6">
      <div class="mb-10" data-reveal>
        <p class="font-mono text-[12px] text-[var(--tertiary)] mb-1.5">
          <span class="text-[#F97316]">//</span> why memctl
        </p>
        <h2 class="text-2xl md:text-3xl font-bold tracking-[-0.02em]">
          Built for teams that ship with AI
        </h2>
      </div>

      <!-- Bento grid -->
      <div class="grid grid-cols-1 md:grid-cols-6 gap-4">

        <!-- Large: Persistent Context + SVG viz -->
        <div class="glass-card p-6 md:col-span-4 group relative overflow-hidden" data-reveal data-reveal-delay="100">
          <div class="absolute top-0 right-0 w-48 h-48 rounded-full bg-orange-500/[0.03] blur-[60px] pointer-events-none"></div>
          <div class="relative flex flex-col md:flex-row md:items-center gap-5">
            <div class="flex-1">
              <div class="w-9 h-9 rounded-lg bg-orange-500/8 border border-orange-500/10 flex items-center justify-center mb-3 group-hover:bg-orange-500/12 transition-colors">
                <svg class="w-[18px] h-[18px] text-[#F97316]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 3v1m0 16v1m-8-9H3m18 0h-1M5.6 5.6l.7.7m12.1-.7-.7.7M5.6 18.4l.7-.7m12.1.7-.7-.7" />
                  <circle cx="12" cy="12" r="4" />
                </svg>
              </div>
              <h3 class="text-lg font-semibold mb-1.5 tracking-tight">Persistent Context</h3>
              <p class="text-sm text-[var(--secondary)] leading-relaxed max-w-sm">
                Every agent on the team picks up where the last left off. No more repeating yourself across sessions or losing hard-won context.
              </p>
            </div>
            <!-- Mini viz: node network -->
            <div class="md:w-48 shrink-0">
              <svg viewBox="0 0 160 100" class="w-full" fill="none">
                <line x1="30" y1="50" x2="80" y2="30" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="30" y1="50" x2="80" y2="70" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="80" y1="30" x2="130" y2="50" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="80" y1="70" x2="130" y2="50" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <circle cx="30" cy="50" r="4" fill="#F97316" opacity="0.7" class="anim-node-pulse" />
                <circle cx="80" cy="30" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 400ms" />
                <circle cx="80" cy="70" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 800ms" />
                <circle cx="130" cy="50" r="4" fill="#F97316" opacity="0.7" class="anim-node-pulse" style="animation-delay: 1200ms" />
                <circle r="2" fill="#F97316" opacity="0.8">
                  <animateMotion dur="3s" repeatCount="indefinite" path="M30,50 L80,30 L130,50" />
                </circle>
                <text x="30" y="68" text-anchor="middle" font-size="8" fill="var(--tertiary)" font-family="monospace">agent 1</text>
                <text x="130" y="68" text-anchor="middle" font-size="8" fill="var(--tertiary)" font-family="monospace">agent 2</text>
              </svg>
            </div>
          </div>
        </div>

        <!-- Small: Open Source -->
        <div class="glass-card p-6 md:col-span-2 group" data-reveal data-reveal-delay="200">
          <div class="w-9 h-9 rounded-lg bg-orange-500/8 border border-orange-500/10 flex items-center justify-center mb-3 group-hover:bg-orange-500/12 transition-colors">
            <svg class="w-[18px] h-[18px] text-[#F97316]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold mb-1.5 tracking-tight">Open Source</h3>
          <p class="text-sm text-[var(--secondary)] leading-relaxed">
            Fully open. Self-host or use our cloud. Your memory, your control.
          </p>
        </div>

        <!-- Small: Branch-Aware + git branch viz -->
        <div class="glass-card p-6 md:col-span-2 group" data-reveal data-reveal-delay="300">
          <div class="w-9 h-9 rounded-lg bg-orange-500/8 border border-orange-500/10 flex items-center justify-center mb-3 group-hover:bg-orange-500/12 transition-colors">
            <svg class="w-[18px] h-[18px] text-[#F97316]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="18" cy="18" r="3" />
              <circle cx="6" cy="6" r="3" />
              <path d="M6 21V9a9 9 0 0 0 9 9" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold mb-1.5 tracking-tight">Branch-Aware</h3>
          <p class="text-sm text-[var(--secondary)] leading-relaxed mb-2">
            Memory follows your git branches. Feature work stays isolated until merge.
          </p>
          <!-- Git branch mini viz -->
          <svg viewBox="0 0 140 30" class="w-full" fill="none">
            <line x1="10" y1="22" x2="130" y2="22" stroke="#F97316" stroke-width="1" opacity="0.4" />
            <path d="M40,22 Q50,8 65,8 L100,8" stroke="#F97316" stroke-width="1" opacity="0.7" fill="none" />
            <path d="M100,8 Q110,15 120,22" stroke="#F97316" stroke-width="1" opacity="0.5" fill="none" stroke-dasharray="2 2" />
            <circle cx="10" cy="22" r="2.5" fill="#F97316" opacity="0.4" />
            <circle cx="40" cy="22" r="2.5" fill="#F97316" opacity="0.4" />
            <circle cx="130" cy="22" r="2.5" fill="#F97316" opacity="0.7" />
            <circle cx="65" cy="8" r="2.5" fill="#F97316" opacity="0.7" class="anim-node-pulse" />
            <circle cx="100" cy="8" r="2.5" fill="#F97316" opacity="0.7" class="anim-node-pulse" style="animation-delay: 600ms" />
            <circle r="1.5" fill="#F97316" opacity="0.8">
              <animateMotion dur="2.5s" repeatCount="indefinite" path="M40,22 Q50,8 65,8 L100,8" />
            </circle>
          </svg>
        </div>

        <!-- Large: Works Everywhere + MCP connection viz -->
        <div class="glass-card p-6 md:col-span-4 group relative overflow-hidden" data-reveal data-reveal-delay="400">
          <div class="absolute bottom-0 left-0 w-48 h-48 rounded-full bg-orange-500/[0.03] blur-[60px] pointer-events-none"></div>
          <div class="relative flex flex-col md:flex-row md:items-center gap-5">
            <div class="flex-1">
              <div class="w-9 h-9 rounded-lg bg-orange-500/8 border border-orange-500/10 flex items-center justify-center mb-3 group-hover:bg-orange-500/12 transition-colors">
                <svg class="w-[18px] h-[18px] text-[#F97316]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="2" y="3" width="20" height="14" rx="2" />
                  <path d="M8 21h8m-4-4v4" />
                </svg>
              </div>
              <h3 class="text-lg font-semibold mb-1.5 tracking-tight">Works with every tool your team uses</h3>
              <p class="text-sm text-[var(--secondary)] leading-relaxed mb-4 max-w-lg">
                One MCP protocol connects them all. Every team member uses their preferred setup.
              </p>
              <div class="flex flex-wrap gap-2">
                {['Claude Code', 'Cursor', 'GitHub Copilot', 'VS Code', 'JetBrains', 'Neovim', 'Windsurf', 'Cline'].map(tool => (
                  <span class="px-3 py-1.5 text-[11px] font-mono rounded-lg border border-[var(--border)] bg-[var(--code-bg)] text-[var(--tertiary)]">
                    {tool}
                  </span>
                ))}
              </div>
            </div>
            <!-- MCP connection viz -->
            <div class="md:w-36 shrink-0">
              <svg viewBox="0 0 120 100" class="w-full" fill="none">
                <circle cx="60" cy="50" r="12" stroke="#F97316" stroke-width="1.5" fill="none" opacity="0.6" />
                <text x="60" y="53" text-anchor="middle" font-size="7" fill="#F97316" opacity="0.8" font-family="monospace">MCP</text>
                <line x1="60" y1="38" x2="60" y2="12" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="60" y1="62" x2="60" y2="88" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="48" y1="44" x2="20" y2="25" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="72" y1="44" x2="100" y2="25" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="48" y1="56" x2="20" y2="75" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <line x1="72" y1="56" x2="100" y2="75" stroke="#F97316" stroke-width="1" opacity="0.4" />
                <circle cx="60" cy="10" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" />
                <circle cx="60" cy="90" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 300ms" />
                <circle cx="18" cy="23" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 600ms" />
                <circle cx="102" cy="23" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 900ms" />
                <circle cx="18" cy="77" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 1200ms" />
                <circle cx="102" cy="77" r="3" fill="#F97316" opacity="0.5" class="anim-node-pulse" style="animation-delay: 1500ms" />
                <circle r="2" fill="#F97316" opacity="0.7">
                  <animateMotion dur="2s" repeatCount="indefinite" path="M60,38 L60,12" />
                </circle>
                <circle r="2" fill="#F97316" opacity="0.7">
                  <animateMotion dur="2.5s" repeatCount="indefinite" path="M48,56 L20,75" />
                </circle>
                <circle r="2" fill="#F97316" opacity="0.7">
                  <animateMotion dur="2.2s" repeatCount="indefinite" path="M100,25 L72,44" />
                </circle>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Divider ── -->
  <div class="relative flex items-center" aria-hidden="true">
    <div class="absolute inset-x-0 h-px bg-gradient-to-r from-transparent via-[var(--border)] to-transparent"></div>
    <div class="relative mx-auto flex w-full max-w-[1400px] justify-between px-6">
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
      <div class="h-1.5 w-1.5 rounded-full bg-[var(--border)]"></div>
    </div>
  </div>

  <!-- ══════════════════════════════════════════════
       BOTTOM CTA
       ══════════════════════════════════════════════ -->
  <section class="relative overflow-hidden py-14 lg:py-20">
    <!-- Grid bg -->
    <div
      class="pointer-events-none absolute inset-0 bg-[linear-gradient(to_right,var(--border)_1px,transparent_1px),linear-gradient(to_bottom,var(--border)_1px,transparent_1px)] bg-[size:32px_32px] opacity-[0.12] [mask-image:linear-gradient(to_top,black_20%,transparent_80%)]"
      aria-hidden="true"
    ></div>

    <!-- Orange glow -->
    <div class="pointer-events-none absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[400px] rounded-full bg-orange-500/[0.05] blur-[100px]" aria-hidden="true"></div>

    <div class="relative z-10 mx-auto max-w-[1400px] px-6" data-reveal>
      <div class="flex flex-col md:flex-row items-center justify-between gap-8 md:gap-14">
        <div class="flex-1">
          <p class="font-mono text-[12px] text-[var(--tertiary)] mb-1.5">
            <span class="text-[#F97316]">//</span> early access
          </p>
          <h2 class="text-2xl md:text-3xl font-bold tracking-[-0.02em] mb-2">
            Be the first to know
          </h2>
          <p class="text-base text-[var(--secondary)] max-w-md leading-relaxed">
            Get early access when memctl launches. Join the waitlist and we'll keep you posted with product updates only.
          </p>
        </div>
        <div class="w-full md:w-auto shrink-0">
          <WaitlistForm />
        </div>
      </div>
    </div>
  </section>

</BaseLayout>
